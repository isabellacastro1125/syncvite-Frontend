<!DOCTYPE html>
<html lang="en">
<head>
  <title>Close Window</title>
  <script>
    // Extract the code parameter from the URL
    const params = new URLSearchParams(window.location.search);
    const code = params.get('code');

    if (code && window.opener) {
        // Send the code back to the main window
        window.opener.postMessage({ code }, window.location.origin);

        // Close the popup window
        window.close();
      } else {
        console.error('Authorization code not found or no parent window');
      }
    //  // Attempt to close the popup
    //  window.close();

    // // Notify parent window if close fails (e.g., popup blockers)
    // if (window.opener) {
    //   window.opener.postMessage("popup-closed", "*");
    // }
  </script>
</head>
<body>
  <p>Authenticating...</p>
  <p>If this window doesn't close automatically, click the button below to close it.</p>
  <button onclick="window.close()">Close Window</button>
</body>
</html>

